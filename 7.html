<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Programmieren 2 - Kapitel 7 - Data-Science</title>

		<link rel="stylesheet" href="reveal.js/dist/reset.css">
		<link rel="stylesheet" href="reveal.js/dist/reveal.css">

        <link rel="stylesheet" href="src/slides.css">
        <link rel="stylesheet" href="src/style.css">

		<link rel="stylesheet" href="src/layout.css">
        <link rel="stylesheet" href="lib/joint.min.css" />
        <link rel="stylesheet" href="src/erd.css" />
        <link rel="stylesheet" href="src/poll.css" />

		<!-- Theme used for syntax highlighting of code -->
		<script>
			if(window.location.search.match( /print-pdf/gi )) {
				document.getElementsByTagName( "head" )[0].innerHTML += '<link rel="stylesheet" href="src/routeros.css">';
			} else {
				document.getElementsByTagName( "head" )[0].innerHTML += '<link rel="stylesheet" href="src/rainbow.css">';
			}
			</script>

        <!--<script defer src="lib/fontawesome.all.min.js"/>-->
        <link href="lib/fontawesome.all.min.css" rel="stylesheet">
        <style> .reveal i.fa { font-family:FontAwesome; font-style: normal; } </style>
	</head>
	<body>
		<div class="reveal">
            <div id="header"></div>
            <div id="footer"></div>
			<div class="slides">
          <section>
            <h4 style="text-align:center"><b>Prof. Dr.-Ing. Johannes Schildgen</b><br>
            <a href="mailto:johannes.schildgen@h-da.de">johannes.schildgen@oth-regensburg.de</a></h4>
            <h1 style="font-size: 200%; margin-top: 1.5cm;">Programmieren 2 (Python)</h1>
            <h3>Kapitel 7: Data-Science</h3>
            <h4 style="text-align:center">&nbsp;</h4>
            <img src="img/ccby.png" height="60px" style="position: absolute; left:0px; border:0; bottom:-225px;">
            <img src="img/oth.png" height="60px" style="position: absolute; right:0px; border:0; bottom:-225px; box-shadow:none">
        </section>
                
                <section>
                  <h3>Jupyter</h3>
                  <div class="trackinfo"><i class="fas fa-book"></i> 20.1</div>
                  <img src="img/7/jupyter_logo.png" class="noborder" style="position: absolute; right:1cm; top: 0.25cm; width:2cm; max-height: 999cm;">
                  <p class="small">Jupyter Notebook ist eine open-source Webanwendung, um interaktive wissenschaftliche Datenauswertungen und Berechnungen durchzuführen.</p>
                  <ul class="small">
                    <li>Eingabe- und Ausgabezellen</li>
                    <li>Code</li>
                    <li>Text / Markdown</li>
                    <li>Diagramme</li>
                    <li>...</li>
                  </ul>
                  <p class="small">Strg+Enter führt aktuelle Zelle aus.</p>
                  <p style="width:11cm" class="small">.ipynb-Dateien lassen sich mit Jupyter Notebook, Jupyter Lite und auch mit Visual Studio Code öffnen.</p>
                  <img src="img/7/jupyter.png" class="noborder" style="position: absolute; right:3mm; top: 4.25cm; width:13cm; max-height: 999cm;">
                </section>
                
                <section>
                  <h3>Jupyter Notebooks in VS Code</h3>
                  <img src="img/7/vscode_jupyter.png" class="noborder" style="width: 100%">
                  <ul class="small">
                    <li style="margin-bottom: 10px;"><b>Select Kernel</b> (oben rechts): Lautzeitumgebung (z. B. Python 3.10.12)</li>
                    <li style="margin-bottom: 10px;"><b><kbd style="border: 2px solid; border-radius: 5px; padding: 3px;">Esc</kbd>/<kbd style="border: 2px solid; border-radius: 5px; padding: 3px;">Enter</kbd></b>: Wechsel in den Kommandomodus / Editierenmodus</li>
                    <li style="margin-bottom: 10px;"><b><kbd style="border: 2px solid; border-radius: 5px; padding: 3px;">A</kbd> / <kbd style="border: 2px solid; border-radius: 5px; padding: 3px;">B</kbd></b> im Kommandomodus (<b>+Code</b>) fügt Code-Block ober-/unterhalb ein</li>
                    <li style="margin-bottom: 10px;"><b>+Markdown</b> fügt Text-Block hinzu:<br><code># Überschrift</code>, <code>**fett**</code>, <code>*kursiv*</code>, <code>- Liste</code>, ...</li>
                    <li style="margin-bottom: 10px;"><b><kbd style="border: 2px solid; border-radius: 5px; padding: 3px;">D</kbd> <kbd style="border: 2px solid; border-radius: 5px; padding: 3px;">D</kbd> im Kommandomodus</b>: aktuellen Block löschen</li>
                    <li style="margin-bottom: 10px;"><b><kbd style="border: 2px solid; border-radius: 5px; padding: 3px;">Strg</kbd>+<kbd style="border: 2px solid; border-radius: 5px; padding: 3px;">Enter</kbd></b>: Aktuelle Zelle ausführen</li>
                    <li style="margin-bottom: 10px;"><b><kbd style="border: 2px solid; border-radius: 5px; padding: 3px;">Shift</kbd>+<kbd style="border: 2px solid; border-radius: 5px; padding: 3px;">Enter</kbd></b>: Aktuelle Zelle ausführen und weiter zur nächsten Zelle</li>
                  </ul>
                </section>

                <section>
                  <h3>Übung 7.1</h3>
                  <div style="position: absolute; top:1mm; right: 1mm; font-weight: bold; font-size: 150%; color:#b9a93e"><countdown time="480" autostart="no" /></div>
                  <p class="small">Erstellen Sie ein Jupyter Notebook (<code>.ipynb</code>) mit folgenden Inhalten:</p>
                  <ol class="small">
                    <li>Markdown-Zelle mit Überschrift und Text</li>
                    <li>Eine Zelle, in der Sie eine Funktion <code>f</code> definieren $f(x) = 2x^2 + 5x - 8$<br>Rufen Sie die Funktion auch in der Zelle auf und geben Sie das Ergebnis aus.</li>
                    <li>Eine Zelle, in der Sie eine Liste mit 10 Zufallszahlen zwischen 0 und 100 erzeugen und diese Liste ausgeben.</li>
                    <li>Verwenden Sie in einer weiteren Zelle List-Comprehension (siehe Kapitel 2), um eine neue Liste zu erzeugen, die $f(x)$ für alle Werte $x$ aus ihrer Liste aus der vorherigen Teilaufgabe enthält. Geben Sie die neue Liste aus.</li>
                  </ul>
                </section>

                <section>
                  <h3>Bibliotheken</h3>
                  <div class="trackinfo"><i class="fas fa-book"></i> 20</div>
                  <p class="small">Python-Bibliotheken für wissenschaftliche Berechnungen und zur Datenanalyse:</p>
                  <ul class="small">
                    <li><b>NumPy</b> - Nummerische Berechnungen mit NumPy-Arrays und Matrizen.</li>
                    <li><b>Matplotlib</b> - Erstellung von 2D-Plots und Diagrammen.</li>
                    <li><b>pandas</b> - Datenmanipulation, -filterung und -analyse auf DataFrames.</li>
                    <li><b>SciPy</b> - Optimierung, Integration, Interpolation, lineare Algebra und mehr.</li>
                    <li><b>Scikit-Learn</b> - Machine-Learning: Klassifikation, Regression, Clustering, ...</li>
                    <li>...</li>
                  </ul>
                  <pre><code class="bash">pip install numpy
pip install matplotlib
pip install pandas
pip install scipy
pip install scikit-learn</code></pre>
                </section>

                <section>
                  <h2>NumPy</h2>
                  <div class="trackinfo"><i class="fas fa-book"></i> 20.2</div>
                  <pre><code class="python" contenteditable data-sample='code/7/numpy_.py#import'></code></pre>

                  <h4>NumPy-Arrays</h4>
                  <p class="small">1-dimensional (Array) oder 2-dimensional (Matrix)</p>
                  <pre><code class="python" contenteditable data-sample='code/7/numpy_.py#array'></code></pre>

                  <p class="small">$\begin{pmatrix} 1 \\ 2 \\ 3 \end{pmatrix} 
                    \begin{pmatrix} 1 & 2 & 3 \\ 4 & 5 & 6 \end{pmatrix}
                    \begin{pmatrix} 0 & 0 & 0 \\ 0 & 0 & 0 \end{pmatrix}
                    \begin{pmatrix} 1 & 1 & 1 \\ 1 & 1 & 1 \end{pmatrix}
                    \begin{pmatrix} 1 & 0 & 0 \\ 0 & 1 & 0 \\ 0 & 0 & 1 \end{pmatrix}
                    \begin{pmatrix} 0 \\ 1 \\ 2 \end{pmatrix}
                    \begin{pmatrix} 0 \\ 50 \\ 100 \end{pmatrix}
                    $</p>
                </section>

                <section>
                  <h3>NumPy-Arrays</h3>
                  <p class="small"><code>dtype=...</code> (Datentyp der Elemente)<br>
                  <code>int32, int64, float32, float64, complex</code></p>
                  <pre><code class="python" contenteditable data-sample='code/7/numpy_.py#dtype'></code></pre>
                  <p class="small">Informationen zum Array:</p>
                  <pre><code class="python" contenteditable data-sample='code/7/numpy_.py#attributes'></code></pre>
                  <ul class="small">
                    <li><code>ndim</code> - Anzahl der Dimensionen (1: Vektor, 2: Matrix)</li>
                    <li><code>shape</code> - Tupel mit Anzahl der Elemente pro Dimension</li>
                    <li><code>size</code> - Anzahl der Elemente</li>
                    <li><code>dtype</code> - Datentyp der Elemente</li>
                </section>

                <section>
                  <h3>Zugriff auf NumPy-Array-Elemente</h3>
                  <pre><code style="max-height: 100cm;" class="python" contenteditable data-sample='code/7/numpy_.py#indexing'></code></pre>
                  <p class="small" style="text-align: center;">$a = \begin{pmatrix} 1 \\ 2 \\ 3 \end{pmatrix}~~~b = \begin{pmatrix} 1 & 4 & 43 \\ 8 & 5 & 12 \end{pmatrix}
                    $</p>
                </section>

                <section>
                  <h3>NumPy-Array-Operationen</h3>
                  <p class="small">Beim Slicing (z. B. <code>[0:3]</code>) und Reshape wird keine Kopie erzeugt!</p>
                  <pre><code class="python" contenteditable data-sample='code/7/numpy_.py#operations'></code></pre>
                  <p class="small" style="text-align: center;">$c = \begin{pmatrix} 42 \\ 2 \\ 3 \end{pmatrix}~~~b = \begin{pmatrix} 42 & 2 & 3 \\ 4 & 5 & 6 \end{pmatrix}~~~d = \begin{pmatrix} 1 \\ 2 \\ 3 \end{pmatrix}~~~e = \begin{pmatrix} 42 & 4 \\ 2 & 5 \\ 3 & 6 \end{pmatrix}
                    $</p>
                  <aside class="notes">Mit <code>reshape</code> wird hier ein 1x6-Array in eine 2x3-Matrix umgewandelt. Wenn man keine Kopie erzeugt, wirken sich Änderungen an Elementen auch auf dem ursprünglichen NumPy-Array aus, da die Elemente nur referenziert werden.</aside>
                </section>

                <section>
                  <h3>Rechnen mit NumPy-Arrays</h3>
                  <pre><code class="python" contenteditable data-sample='code/7/numpy_.py#math'></code></pre>
                  <pre><code class="python" contenteditable data-sample='code/7/numpy_.py#math2'></code></pre>
                </section>

                <section>
                  <h3>Übung 7.2</h3>
                  <div style="position: absolute; top:1mm; right: 1mm; font-weight: bold; font-size: 150%; color:#b9a93e"><countdown time="900" autostart="no" /></div>
                  <p class="small">Führen Sie in einem Jupyter Notebook folgende Berechnungen durch:</p>
                  <ol class="small">
                    <li>Matrix-Vektor-Multiplikation: $\begin{pmatrix} 2 & 2 & 0 \\ 2 & -1 & -3 \\ 1 & 0 & 1\end{pmatrix} \cdot \begin{pmatrix} 3 \\ 1 \\ 0 \end{pmatrix}$</li>
                    <li>Erzeugen Sie aus der Matrix aus 1. eine Kopie, bei der Sie alle negativen Zahlen durch 0 ersetzen.</li>
                    <li>Geben Sie die transponierte Matrix von der Matrix aus 1. aus.</li>
                    <li>Matrix-Multiplikation: $\begin{pmatrix} 1 & -2 & 3 \\ -4 & 5 & -6 \end{pmatrix} \cdot \begin{pmatrix} -1 & 2 \\ -3 & 4 \\ -5 & 6 \end{pmatrix}$</li>
                    <li>Finden Sie heraus, wie Sie die Determinate der Matrix aus 1. berechnen.</li>
                  </ul>
                </section>

                <section>
                  <h3>Funktionen</h3>
                  <p class="small">Funktionen in NumPy (z. B. <code>np.sin</code>) sowie elementare Rechenoperationen<br>(<code>+</code>, <code>-</code>, <code>*</code>, ...) liefern bei Eingabe eines NumPy-Arrays wieder einen NumPy-Array.</p>
                  <pre style="width:93%"><code class="python" contenteditable data-sample='code/7/numpy_.py#functions'></code></pre>
                  <p class="small">&nbsp;</p>

                  <h4>Lambda-Funktionen in Python: <code>lambda x: ...</code></h4>
                  <p class="small" style="margin-top: -5mm;">Simple Funktion, die nur über einen einzigen Ausdruck definiert wird.</p>
                  <pre style="width:93%"><code class="python" contenteditable data-sample='code/7/numpy_.py#lambda'></code></pre>
                  <pre style="width:93%"><code class="python" contenteditable data-sample='code/7/numpy_.py#def' data-sample-indent="keep"></code></pre>
                </section>

                <section>
                  <h2>matplotlib</h2>
                  <div class="trackinfo"><i class="fas fa-book"></i> 20.5</div>
                  <pre style="width:13cm; left:-4.5cm"><code class="python" contenteditable data-sample='code/7/matplotlib_.py#import'></code></pre>
                  <h4><code>plot([X],Y,[fmt], ...)</code></h4>
                  <pre style="width:13cm; left:-4.5cm"><code class="python" contenteditable data-sample='code/7/matplotlib_.py#plot'></code></pre>
                  <img src="img/7/plot_x2.png" class="noborder" style="position: absolute; top: 3cm; right:5mm; width:10cm;">
                  <p class="small"><code>fmt</code>: Formatierung (Farbe und Linienstil)<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<code>-</code> durchgezogene Linie<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<code>--</code> gestrichelt<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<code>o</code> einzelne Punkte</p>
                  <pre style="width:13cm; left:-4.5cm"><code class="python" contenteditable data-sample='code/7/matplotlib_.py#fmt'></code></pre>
                  <img src="img/7/plot_x2--.png" class="noborder" style="position: absolute; top: 10cm; right:5mm; width:10cm;">
                </section>

                <section>
                  <h3>Übung 7.3</h3>
                  <div style="position: absolute; top:1mm; right: 1mm; font-weight: bold; font-size: 150%; color:#b9a93e"><countdown time="720" autostart="no" /></div>
                  <p class="small">Erzeugen Sie in einem Jupyter Notebook folgende Graphen:</p>
                  <ol class="small">
                    <li>$f(x) = 5x² + 2x - 3$</li>
                    <li>$f(x) = (cos(x))^2$</li>
                    <li>100 x-Werte (von 0 bis 99) und 100 zufällige y-Werte (zwischen 0 und 100) </li>
                  </ul>
                </section>

                <section>
                  <h3>Mehrere Kurven in eine Grafik</h3>
                  <pre style="width:14cm; left:-4.5cm"><code class="python" contenteditable data-sample='code/7/matplotlib_.py#plot2'></code></pre>
                  <p class="small">Oder alternativ <code>plt.plot</code> mehrfach aufrufen:</p>
                  <img src="img/7/plot_x2_sin.png" class="noborder" style="position: absolute; top: 1.25cm; right:5mm; width:10cm;">
                  <pre style="width:14cm; left:-4.5cm"><code class="python" contenteditable data-sample='code/7/matplotlib_.py#plot3'></code></pre>
                  <aside class="notes">Aufrufe auf <code>plt</code> arbeiten alle auf der gleichen Grafik. <code>plt.plot</code> fügt einen Linien-Plot zum Diagramm hinzu, <code>plt.scatter</code> unverbundene Punkte, <code>plt.text</code> einen Text, usw.</aside>
                </section>

                <section>
                  <h3>Achsenbeschriftung, etc.</h3>
                  <p class="small"><code>plt.subplots()</code> liefert ein Figure- und ein Axes-Objekt:</p>
                  <pre><code class="python" contenteditable data-sample='code/7/matplotlib_.py#subplots'></code></pre>
                  <img src="img/7/plot_subplots.png" class="noborder" style="margin-top: -1cm; width:12cm;">
                </section>

                <section>
                  <h3>Übung 7.4</h3>
                  <div style="position: absolute; top:1mm; right: 1mm; font-weight: bold; font-size: 150%; color:#b9a93e"><countdown time="900" autostart="no" /></div>
                  <p class="small">Erzeugen Sie in einem Jupyter Notebook einen Graphen, der Peters und Utes Vermögen über die nächsten 25 Jahre darstellt:</p>
                  <ul class="small">
                    <li>Peter und Ute besitzen zu Beginn jeweils 800 EUR.</li>
                    <li>Peter legt sein Geld zu 4% Zinsen im Jahr an.</li>
                    <li>Ute kauft sich direkt zu Beginn ein Balkonkraftwerk für 800 EUR, damit ist ihr ganzes Geld weg. Aber sie spart nun jedes Jahr 100 EUR Stromkosten.</li>
                  </ul>
                  <p class="small">Das Balkonkraftwerk selbst zählt nicht zum Vermögen. Sie können aber Utes kumulierte Stromersparnis zu Ihrem Vermögen dazuzählen, weil Peter entsprechende Mehrausgaben für seinen Strombezug bezahlt und Ute nicht.</p>
                </section>

                <section>
                  <h3>Weitere Diagrammtypen</h3>
                  <h4>Balkendiagramm</h4>
                  <pre><code class="python" contenteditable data-sample='code/7/matplotlib_barpie.py#bar'></code></pre>
                  <img src="img/7/plot_bar.png" class="noborder" style="position: absolute; top: 1.5cm; right:5mm; width:9cm;">

                  <p class="small">&nbsp;</p>

                  <h4>Kuchendiagramm</h4>
                  <pre><code class="python" contenteditable data-sample='code/7/matplotlib_barpie.py#pie'></code></pre>
                  <img src="img/7/plot_pie.png" class="noborder" style="position: absolute; top: 8.5cm; right:-10mm; width:10cm;">
                </section>

                <section>
                  <h2>pandas</h2>
                  <div class="trackinfo"><i class="fas fa-book"></i> 20.3</div>
                  <pre><code class="python" contenteditable data-sample='code/7/pandas_.py#import'></code></pre>
                  <h4>Series</h4>
                  <p class="small" style="margin-top: -5mm;">Eindimensionale Datenstruktur.<br>Jeder Eintrag hat einen Index (standardmäßig 0, 1, 2, ...) und einen Wert. </p>
                  <pre style="width:13.6cm; left:-4.5cm"><code class="python" contenteditable data-sample='code/7/pandas_.py#series'></code></pre>
                  <p style="position: absolute; top:7.6cm; left:21cm; font-size: 50%;">
                    <code>0&nbsp;&nbsp;&nbsp;&nbsp;1</code><br>
                    <code>1&nbsp;&nbsp;&nbsp;&nbsp;2</code><br>
                    <code>2&nbsp;&nbsp;&nbsp;&nbsp;3</code><br>
                    <code>dtype: int64</code>
                  </p>

                  <h4>DataFrames</h4>
                  <p class="small" style="margin-top: -5mm;">Zweidimensionale Datenstruktur (Tabelle mit Zeilen und Spalten).<br>Zeilen haben einen Index (standardmäßig 0, 1, 2, ...), Spalten haben Namen.</p>
                  <pre style="width: 92%;"><code class="python" contenteditable data-sample='code/7/pandas_.py#dataframe'></code></pre>
                  <table class="small" style="margin-top: -4mm;">
                    <tr><th>&nbsp;</th><th>A</th><th>B</th><th>C</th></tr>
                    <tr><th>0</th><td>1</td><td>2</td><td>3</td></tr>
                    <tr><th>1</th><td>4</td><td>5</td><td>6</td></tr> 
                  </table>
                </section>

                <section>
                  <h3>Pandas-Series</h3>
                  <pre style="width:13.6cm; left:-4.5cm"><code class="python" contenteditable data-sample='code/7/pandas_.py#series1'></code></pre>
                  <p style="position: absolute; top:2cm; left:16cm; font-size: 50%;">
                    <code>0&nbsp;&nbsp;&nbsp;&nbsp;3</code><br>
                    <code>1&nbsp;&nbsp;&nbsp;&nbsp;9</code><br>
                    <code>dtype: int64</code>
                  </p>
                  <p style="position: absolute; top:2cm; left:21cm; font-size: 50%;">
                    <code>0&nbsp;&nbsp;&nbsp;&nbsp;3</code><br>
                    <code>1&nbsp;&nbsp;&nbsp;&nbsp;9</code><br>
                    <code>2&nbsp;&nbsp;&nbsp;&nbsp;1</code><br>
                    <code>4&nbsp;&nbsp;&nbsp;&nbsp;4</code><br>
                    <code>dtype: int64</code>
                  </p>

                  <h4>Series mit eigenen Indizes:</h4>
                  <pre style="width:13.6cm; left:-4.5cm"><code class="python" contenteditable data-sample-indent="keep" data-sample='code/7/pandas_.py#series2'></code></pre>
                  <p style="position: absolute; top:7.5cm; left:16cm; font-size: 50%;">
                    <code>A&nbsp;&nbsp;&nbsp;&nbsp;3</code><br>
                    <code>B&nbsp;&nbsp;&nbsp;&nbsp;9</code><br>
                    <code>dtype: int64</code>
                  </p>
                  <p style="position: absolute; top:7.5cm; left:21cm; font-size: 50%;">
                    <code>A&nbsp;&nbsp;&nbsp;&nbsp;3</code><br>
                    <code>C&nbsp;&nbsp;&nbsp;&nbsp;1</code><br>
                    <code>dtype: int64</code>
                  </p>

                  <aside class="notes">Man kann sich eine Series wie eine Tabelle mit zwei Spalten vorstellen: Index-Schlüssel und Wert. Die Indizes werden automatisch vergeben (0, 1, 2, ...), man kann sie aber auch manuell beliebig setzen. Auf die Werte greift man entweder über den Index zu (z. B. <code>s[0:2]</code>) oder über ein Prädikat, was für die Werte erfüllt sein muss (z. B. <code>s[s < 10]</code>). Die hier beschriebenen Operationen (außer der Einzel-Element-Zugriff <code>s[0]</code>) liefern immer wieder eine Pandas-Series.<br>
                  Auf der nächsten Folie geht es um DataFrames. Man kann sie als Verbindung mehrerer Series (eine pro Spalte) mit gemeinsamen Indizes sehen.</aside>
                </section>

                <section>
                  <h3>Pandas-DataFrames</h3>
                  <pre><code class="python" contenteditable data-sample-indent="keep" data-sample='code/7/pandas_.py#dataframe1'></code></pre>
 
                  <p style="position: absolute; top: 8cm; left: 1cm; font-size: 50%;">
                    <code>0&nbsp;&nbsp;&nbsp;&nbsp;1</code><br>
                    <code>1&nbsp;&nbsp;&nbsp;&nbsp;4</code><br>
                    <code>dtype: int64</code>
                  </p>

                  <table class="small" style="position: absolute; top: 8cm; left: 7cm">
                    <tr><th>&nbsp;</th><th>A</th><th>B</th><th>C</th></tr>
                    <tr><th>0</th><td>1</td><td>2</td><td>3</td></tr>
                  </table>

                  <table class="small" style="position: absolute; top: 8cm; left: 14cm">
                    <tr><th>&nbsp;</th><th>A</th><th>C</th></tr>
                    <tr><th>0</th><td>1</td><td>3</td></tr>
                    <tr><th>1</th><td>4</td><td>6</td></tr>
                  </table>

                  <table class="small" style="position: absolute; top: 8cm; left: 20cm">
                    <tr><th>&nbsp;</th><th>A</th><th>C</th></tr>
                    <tr><th>0</th><td>1</td><td>3</td></tr>
                  </table>

                  <p style="margin-top: 5cm;" class="small">Betrachten von Zeilen (verändert Dataframe nicht, außer wenn <code>inplace=True</code>):</p>
                  <pre><code class="python" contenteditable data-sample-indent="keep" data-sample='code/7/pandas_.py#dataframe2'></code></pre>
                </section>

                <section>
                  <h3>DataFrame: Methoden</h3>
                  <pre><code class="python" contenteditable data-sample-indent="keep" data-sample='code/7/pandas_.py#dataframe3'></code></pre>

                  <h4><code>loc</code> - Auswahl bestimmter Zeilen und Spalten</h4>
                  <pre style="margin-top: -2mm;"><code class="python" contenteditable data-sample-indent="keep" data-sample='code/7/pandas_.py#loc'></code></pre>

                  <aside class="notes">Viele Methoden auf DataFrames liefern wieder einen DataFrame. Daher kann man sie mit Punkt-Notation verketten. Der ursprüngliche DataFrame wird dann aber nicht verändert, auch wird keine echte Kopie angefertigt. Der neue DataFrame referenziert lediglich auf die Elemente im ursprünglichen DataFrame. <code>loc</code> nimmt zwei Parameter: Welche Zeilen (über Index oder Prädikat)? Welche Spalten (optional)?</aside>
                </section>

                <section>
                  <h3><code>pd.read_csv</code> - Datei einlesen</h3>
                  <pre><code class="plaintext">1;Russia;145,934,462;Eastern Europe
2;Germany;83,783,942;Western Europe</code></pre>

                  <pre><code class="python" contenteditable data-sample-indent="keep" data-sample='code/7/eu-countries.py'></code></pre>
                  <table class="small" style="margin-top: -5mm;">
                    <tr><th>&nbsp;</th><th>Country</th><th>Population</th><th>Region</th></tr>
                    <tr><td>29</td><td>Albania</td><td>2877797</td><td>Southern Europe</td></tr>
                    <tr><td>...</td><td>...</td><td>...</td><td>...</td></tr>
                  </table>
                  <aside class="notes">In unserer CSV-Datei sind die Werte mit Semikolon separiert, daher die Option <code>sep=";"</code>. Oft haben CSV-Dateien in der ersten Zeile einen Header mit Spaltennamen, unsere nicht. Daher sagen wir <code>header=None</code> und setzen die Spalten manuell. <code>thousands=","</code>, weil Zahlen in der Datei so aussehen: <code>1,000</code></aside>
                </section>

                <section>
                  <h3>Übung 7.5</h3>
                  <div style="position: absolute; top:1mm; right: 1mm; font-weight: bold; font-size: 150%; color:#b9a93e"><countdown time="1200" autostart="no" /></div>
                  <p class="small">Laden Sie sich von der Webseite des Studierendenwerks (<a href="https://stwno.de/de/gastronomie/speiseplan/oth-regensburg/seybothstrasse-mittags" target="_blank">stwno.de</a>) den Mensaplan als CSV-Datei herunter und führen Sie in einem Jupyter Notebook folgende Operationen durch:</p>
                  <ol class="small">
                    <li>Lesen Sie die CSV-Datei in einen Pandas-Dataframe ein. Verwenden Sie die Option <code>encoding="iso-8859-1"</code>, damit Umlaute korrekt dargestellt werden. Geben Sie nur die ersten Zeilen aus: <code>data.head()</code></li>
                    <li>Wie viele Zeilen hat der Dataframe?</li>
                    <li>Was sind die drei teuersten Essen?</li>
                    <li>Was gibt es am Dienstag alles zu essen?</li>
                    <li>Welche Suppe gibt es am Freitag?</li>
                    <li>Löschen Sie die Spalte <code>preis</code></li>
                    <li>Wie viel % sind Mitarbeiterpreise im Schnitt teurer als Studierendenpreise?</li>
                  </ol>
                </section>

                <section>
                  <h3><code>re</code> - Reguläre Ausdrücke (RegEx)</h3>
                  <div class="trackinfo"><i class="fas fa-book"></i> 5.6</div>
                  <pre style="width: 100%;"><code class="python" contenteditable data-sample-indent="keep" data-sample='code/7/regex.py'></code></pre>

                  <div class="columns small" style="margin-top: -5mm;">
                    <div>
                      <table>
                        <tr><td><code>.</code></td><td>Beliebiges Zeichen</td></tr>
                        <tr><td><code>^</code></td><td>String-Anfang</td></tr>
                        <tr><td><code>$</code></td><td>String-Ende</td></tr>
                        <tr><td><code>[0-9\.]</code></td><td>Eines der Zeichen</td></tr>
                        <tr><td><code>[^a-c]</code></td><td>Alle Zeichen, außer diese</td></tr>
                        <tr><td><code>A|S</code></td><td>Regex A oder S</td></tr>
                        <tr><td><code>\w</code>,<code>\d</code>,<code>\s</code></td><td><code>[A-Za-z0-9_]</code>, Zahl, Leerz.</td></tr>
                        <tr><td><code>\$</code></td><td>Sonderzeichen mit <code>\</code> escapen</td></tr>
                      </table>
                    </div>
                    <div>
                      <table>
                        <tr><td><code>*</code></td><td>0 mal oder öfter</td></tr>
                        <tr><td><code>+</code></td><td>Mind. einmal</td></tr>
                        <tr><td><code>?</code></td><td>Keinmal oder einmal</td></tr>
                        <tr><td><code>{m}</code></td><td>Genau m mal</td></tr>
                        <tr><td><code>{m,n}</code></td><td>Zwischen m und n mal</td></tr>
                        <tr><td><code>{m,}</code></td><td>Mind. m mal</td></tr>
                        <tr><td><code>\W</code>,<code>\D</code>,<code>\S</code></td><td>Nicht <code>\w</code>,<code>\d</code>,<code>\s</code></tr>
                      </table>
                    </div>
                  </div>
                  </section>

                  <section>
                    <h3>Übung 7.6</h3>
                    <div style="position: absolute; top:1mm; right: 1mm; font-weight: bold; font-size: 150%; color:#b9a93e"><countdown time="1200" autostart="no" /></div>
                    <p class="small">Dies ist eine Fortsetzung der vorherigen Übung. Fahren Sie mit den Operationen in Ihrem Jupyter Notebook, in welchem Sie den Mensaplan in einen Dataframe geladen haben, fort.</p>
                    <ol class="small">
                      <li>Entfernen Sie mit folgendem Kommando die Zahlen aus den Warengruppen (z. B. <code>HG1</code> &rightarrow; <code>HG</code>):</li>
                    </ol>
                    <pre style="width: 100%;"><code class="python">data["warengruppe"] = data["warengruppe"].str.replace(r'\d+', '', 
                                                      regex=True)</code></pre>
                    
                    <ol class="small" start="2">
                      <li>Was ist der durchschnittliche Preis für Hauptpreisen für Studierende?</li>
                      <li>Entfernen Sie alles, was in den Essensbezeichnungen in Klammern steht.</li>
                      <li>Wandeln Sie die Datumswerte in <code>datetime</code>-Objekte um:</li>
                    </ol>
                    <pre style="width: 100%;"><code class="python">data["datum"] = pd.to_datetime(data["datum"], format="%d.%m.%Y")</code></pre>

                  <ol class="small" start="5">
                    <li>Was gibt es heute zu essen?</li>
                    <li>Erzeugen Sie ein Kuchendiagramm für die Anzahl vegetarischer, veganer und fleischhaltiger Hauptgerichte.</li>
                  </ol>

                </section>

                <section>
                  <h2>SciPy</h2>
                  <div class="trackinfo"><i class="fas fa-book"></i> 20.4</div>
                  <pre style="width:13cm; left:-4.94cm"><code class="python" contenteditable data-sample='code/7/scipy_.py#import'></code></pre>
                  <pre style="width:13cm; left:-4.94cm"><code class="python" contenteditable data-sample='code/7/scipy_.py#minimize'></code></pre>
                  <img src="img/7/minimize.png" class="noborder" style="position: absolute; top: 0.5cm; right:5mm; width:9cm;">
                  <pre><code class="plaintext">fun: -0.125
hess_inv: array([[0.25]])
      jac: array([1.49011612e-08])
  message: 'Optimization terminated successfully.'
    nfev: 6
     nit: 2
    njev: 3
  status: 0
  success: True
        x: array([0.74999999])</code></pre>
                <aside class="notes"><code>minimize</code> nimmt eine Funktion f entgegen und einen Startwert (hier 0) und sucht von diesem Startwert aus nummerisch das x mit geringstem f(x), hier: 0.75.</aside>
                </section>

                <section>
                  <h3>Interpolation / Extrapolation</h3>
                  <p class="small"><code>scipy.interpolate.interp1d</code> erzeugt eine lineare Interpolation:</p>
                  <pre><code class="python" contenteditable data-sample='code/7/scipy_.py#interpolate'></code></pre>

                  <pre><code class="python" contenteditable data-sample='code/7/scipy_.py#extrapolate' data-sample-indent="keep"></code></pre>
                  <img src="img/7/interpolate.png" class="noborder" style="position: absolute; top: 10.5cm; left:15mm; width:10cm; z-index: -1;">
                  <img src="img/7/extrapolate.png" class="noborder" style="position: absolute; top: 10.5cm; right:15mm; width:10cm; z-index: -1;">
                </section>

                <section>
                  <h3><code>fsolve</code> - Nullstellen finden</h3>
                  <pre><code class="python" contenteditable data-sample='code/7/scipy_.py#fsolve'></code></pre>
                  <img src="img/7/fsolve.png" class="noborder" style="width:12cm; margin-top: -1cm;">

                  <aside class="notes"><code>fsolve</code> nimmt eine Funktion f entgegen und einen oder mehrere Startwerte. Von diesen Startwerten aus sucht SciPy nummerisch x-Werte, sodass f(x) = 0. Auf diese Art kann man auch ermitteln, ob und wo sich zwei Funktionen schneiden: Man zieht beide Funktionen voneinander ab. Dort wo die Differenz 0 ist, haben beide den gleichen y-Wert.</aside>
                </section>

                <section>
                  <h3>Übung 7.7</h3>
                  <div style="position: absolute; top:1mm; right: 1mm; font-weight: bold; font-size: 150%; color:#b9a93e"><countdown time="1200" autostart="no" /></div>
                  
                  <ol class="small">
                    <li>Erzeugen Sie für die x-Werte 0, 10, 20, 30, 40 und 50 jeweils einen zufälligen y-Wert zwischen 0 und 100. Führen Sie eine kubische Interpolation durch und stellen Sie das Ergebnis grafisch dar.</li>
                    <li>In Übung 7.4 haben Sie eine grafische Lösung gefunden, nach wie vielen Jahren sich Utes Investment in ein Balkonkraftwerk gelohnt hat. Nutzen Sie SciPy, um diese Lösung nummerisch zu ermitteln.</li>
                  </ol>
              </section>

              <section>
                <h3>Scikit-Learn</h3>
                <p class="small">Machine-Learning-Bibliothek für Python.</p>
                <pre style="z-index: -2;"><code class="python" contenteditable data-sample='code/7/sklearn_.py#import'></code></pre>
                <p class="small">&nbsp;</p>
                <h4 style="margin-top: -3mm;">Lineare Regression</h4>
                <pre><code class="python" contenteditable data-sample='code/7/sklearn_.py#linear_regression' data-sample-indent="keep"></code></pre>
                <img src="img/7/linear_regression.png" class="noborder" style="position: absolute; top:1cm; right:0mm; width:10cm; z-index: -1;">
                <aside class="notes">Unser DataFrame mit Testdaten besitzt ein Feature (x). Zusammen mit den dazugehörigen y-Werten wird das Modell trainiert. Danach sind mir mit dem Modell in der Lage, unbekannte y-Werte für gegebene x-Werte (hier: 7) vorherzusagen. Es gibt verschiedene Machine-Learning-Algorithmen. Bei der linearen Regression wird eine Regressionsgerade f(x)=ax+b gesucht mit minimalen Abständen zu den Testdaten. </aside>
              </section>

              <section>
                <h3>Übung 7.8</h3>
                <div style="position: absolute; top:1mm; right: 1mm; font-weight: bold; font-size: 150%; color:#b9a93e"><countdown time="1320" autostart="no" /></div>
                
                <p class="small">Dies ist eine Fortsetzung von den Übungsaufgaben auf Ihrem Mensa-Dataset.</p>

                <ol class="small">
                  <li>Trainieren Sie ein Modell, welches in der Lage sein soll, anhand des Studierenden-Preises eines Essens den entsprechenden Mitarbeiter-Preis vorherzusagen.</li>
                  <li>Testen Sie Ihr Modell: Wie wäre der Mitarbeiter-Preis eines Essens, welches für Studierende 6.50 EUR kostet?</li>
                  <li>Laden Sie sich eine weitere CSV mit anderen Mensa-Essen (z. B. von letzter oder nächster Woche) herunter. Fügen Sie in dem entsprechenden DataFrame eine Spalte hinzu, in der Sie die Bediensteten-Preise anhand Ihres Modells vorhersagen. Vergleichen Sie die Vorhersagen mit den tatsächlichen Preisen.</li>
                  <li>Verwenden Sie nun als Features, mit denen Sie Ihr Modell trainieren, nicht nur den Studierenden-Preis, sondern den Studierenden- und Gäste-Preis. Die Kombination aus beidem soll genutzt werden, um den Bediensteten-Preis vorherzusagen. Macht dieses Modell bessere Vorhersagen?</li>
                </ol>

            </section>

            <section>
              <h3>Klassifikation</h3>
              <pre style="width:100%; margin-top: -2mm;"><code style="max-height: 100cm;" class="python" contenteditable data-sample='code/7/classifier.py#classifier' data-sample-indent="keep"></code></pre>
              <script>
                // Funktion, um eine Zahl in zweistelliges Format zu formatieren (führende Null hinzufügen)
                function formatiereZweistellig(zahl) {
                    return zahl < 10 ? '0' + zahl : zahl;
                }
            
                var heute = new Date();
                var wochentag = heute.getDay();
                var diff = 1 + (7 - wochentag) % 7; // Calculate the difference to the next Monday
                var naechsterMontag = new Date(heute.getFullYear(), heute.getMonth(), heute.getDate() + diff);

                var tag = naechsterMontag.getDate();
                var monat = naechsterMontag.getMonth() + 1; // Monate in JavaScript beginnen bei 0
                var jahr = naechsterMontag.getFullYear();
            
                var datum = formatiereZweistellig(tag) + '.' + formatiereZweistellig(monat) + '.' + jahr;
                var wochentag = ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa'][naechsterMontag.getDay()];
            </script>
              <table class="small" style="margin-top: -3mm;">
                <tr><th>&nbsp;</th><th>datum</th><th>tag</th><th>warengruppe</th><th>name</th><th>stud</th><th>bed</th><th>gast</th><th>wg_pred</th></tr>
                <tr><td>37</td><td><script>document.write(datum);</script></td><td><script>document.write(wochentag);</script></td><td>B4</td><td>Pommes</td><td>1.40</td><td>1.50</td><td>2.0</td><td>B1</td></tr>
              </table>
              <aside class="notes">Das Modell wird trainiert mit Features (hier: Studierenden- und Bediensteten-Preise) und Labels (Warengruppe) und kann damit die Warengruppe für ein unbekanntes Essen vorhersagen. Wir teilen hier die Daten in 80% Trainingsdaten (nur auf denen wird trainiert) und Testdaten (zur Überprüfung) auf.</aside>
            </section>

            <section>
              <h3>Zusammenfassung</h3>
              <ul class="small">
                <li>Jupyter Notebooks</li>
                <li>NumPy: Arrays, Matrizen, Vektoren, ...</li>
                <li>matplotlib: Plotten von Grafiken</li>
                <li>pandas: Series, Dataframes</li>
                <li>scipy: Optimierung (Minimum, Nullstellen, ...), Interpolation</li>
                <li>scikit-learn: Machine Learning, Lineare Regression, Klassifikation</li>
            </section>
              
        
              </div>
            </div>
        
            <script src="reveal.js/dist/reveal.js"></script>
		<script src="reveal.js/plugin/markdown/markdown.js"></script>
		<script src="reveal.js/plugin/highlight/highlight.js"></script>
		<script src="reveal.js/plugin/zoom/zoom.js"></script>
		<script src="reveal.js/plugin/math/math.js"></script>
		<script src="reveal.js/plugin/notes/notes.js"></script>
		<script src="reveal.js/plugin/search/search.js"></script>
        <script src="lib/jquery.js"></script>
        <script src="lib/lodash.js"></script>
        <script src="lib/backbone.js"></script>
        <script src="lib/joint.min.js"></script>
				<script src="lib/deflate.js"></script>

		<script src="src/init_reveal.js"></script>

        <script>
        if(window.location.search.match( /print-pdf/gi )) {
                document.getElementById('header').style="display:none";
                document.getElementById('footer').style="display:none";
        }
        </script>

        
        
          </body>
        </html>
        